# Карта проекта Gears of Horde

Этот документ представляет собой подробный анализ состояния проекта, карту реализованного функционала, выявленные "заглушки" и план развития.

## 1. Обзор и Технический Стек

Проект представляет собой платформу для хостинга и управления модами (предположительно для игры 7 Days to Die, судя по структуре файлов), с акцентом на удобство авторов, версионирование и локализацию.

*   **Runtime:** Node.js 24+
*   **Framework:** Next.js 16.1.0 (Canary)
*   **Language:** TypeScript 5.9
*   **Database:** PostgreSQL 18 (via Prisma ORM 7)
*   **Styling:** TailwindCSS 4.1
*   **Auth:** NextAuth.js 5 (Beta)
*   **UI Components:** Radix UI, Lucide React

## 2. Карта Функционала

### 2.1. Система Модов (Core)
Центральная часть приложения. Реализована достаточно подробно.
*   **Модель данных:**
    *   Поддержка версий мода и версий игры.
    *   Сложные поля: ссылки, видео, скриншоты, changelog, локализации (JSON).
    *   Статистика: просмотры, скачивания, рейтинг (реализована базово).
    *   История анонимных просмотров.
*   **Редактор (VisualModEditor):**
    *   **Статус:** Высокая готовность.
    *   Фунционал: Визуальное редактирование, Autosave (черновики), предпросмотр (UnifiedModLayout).
    *   Интеграция: Создание/Обновление модов, отправка на модерацию (pending status).
*   **Карточка мода (ModCard):**
    *   Отображение основной инфо, тегов, статистики.

### 2.2. Пользователи и Профиль
*   **Авторизация:** Интеграция с OAuth провайдерами (Discord, etc - судя по `Account` модели).
*   **Профиль пользователя:**
    *   **Мои моды:** Список созданных модов, редактирование.
    *   **Подписки:** Отслеживание обновлений модов.
    *   **История:** История просмотров и скачиваний.

### 2.3. Новости
*   **Автоматические новости:** При создании мода или апдейте автоматически генерируется новость.
*   **Модель:** Связь с модом, теги, контент в Markdown.

### 2.4. Система Тегов
Очень развитая система категоризации.
*   **Типы тегов:** `gamever` (версия игры), `author`, `lang` (язык), `status`, `newscat`, `tag` (общие).
*   **Логика:**
    *   Автоматическое создание тегов авторов и версий.
    *   Цветовое кодирование (градиенты для версий).
    *   Слияние тегов (Merge) и переименование категорий.

### 2.5. Локализация (i18n)
*   Используется `next-intl`.
*   Поддержка перевода интерфейса (en/ru).
*   **Локализация контента модов:** Модель `Mod` содержит поле `localizations` для перевода описаний/названий модов.
*   **Краудсорсинг переводов:** Существует модель `TranslationSuggestion` для предложений переводов от пользователей.

---

## 3. Анализ Состояния: Готово vs Заглушки

### ✅ Реализовано хорошо
1.  **Data Layer (Prisma):** Схема базы данных выглядит проработанной и охватывает большинство кейсов (история, черновики, связь версий).
2.  **VisualModEditor:** Редактор модов выглядит мощным инструментом с продуманным UX (autosave, history, preview).
3.  **Tag System:** Логика управления тегами (особенно `tag-actions.ts`) выглядит сложной и полной.

### ⚠️ Частично / Требует внимания
1.  **Рейтинг и Отзывы:**
    *   В базе данных есть поля `rating` и `ratingCount`, но **нет таблицы отзывов/комментариев**. Это означает, что рейтинг либо не работает, либо "висит в воздухе" без текстового подтверждения от пользователей. Это скорее "заглушка".
2.  **Модерация (Mod Submissions):**
    *   Есть статус `pending`. Есть `mod-submission-actions.ts`.
    *   Но нет явного UI для администратора, где он просматривает очередь. Логика "зарыта" в экшенах.

### ❌ Отсутствует / Критические "Заглушки"
1.  **Панель Администратора (Admin Dashboard):**
    *   В структуре роутов (`src/app/[locale]`) **не обнаружена папка `/admin`**.
    *   Есть `admin-actions.ts`, но нет интерфейса для управления пользователями, модами, тегами и переводами.
    *   *Это самый большой пробел на данный момент.*
2.  **Тестирование:**
    *   Отсутствуют видимые конфигурации тестов (Jest/Playwright). Для проекта такого масштаба это риск.
3.  **Поиск и Фильтрация:**
    *   Хотя есть `search-actions.ts`, полноценной страницы поиска с фасетными фильтрами (по версии, тегам, автору) пока не видно в детальном разборе (нужно проверить `src/app/[locale]/search`).

---

## 4. План Развития (Roadmap)

Для превращения проекта в полноценный продукт (Production Ready), рекомендуется следующий план:

### Этап 1: Административный Интерфейс
Необходимо создать `src/app/[locale]/admin` с разделами:
*   **Dashboard:** Общая статистика.
*   **Moderation Queue:** Список модов со статусом `pending`. Интерфейс принятия/отклонения с указанием причины.
*   **Tag Manager:** UI для слияния тегов, настройки цветов (сейчас это только в коде/экшенах).
*   **Users:** Управление банами/ролями.

### Этап 2: Социальные функции
*   **Комментарии:** Добавить модель `Comment` или `Review` (связь User <-> Mod). Рейтинг должен строиться на основе реальных отзывов.
*   **Уведомления:** Система уведомлений (в навигационной панели) о выходе новой версии подписанного мода или ответе на комментарий.

### Этап 3: Улучшение DX и Стабильности
*   **CI/CD:** Настроить GitHub Actions для проверки типов и линтинга.
*   **Tests:** Написать хотя бы E2E тесты для критических путей: Создание мода -> Сохранение черновика -> Публикация.

### Этап 4: Поиск и Discoverability
*   Внедрение полнотекстового поиска (если PostgreSQL, то `tsvector`, либо внешнее решение), так как `contains` фильтр Prisma может быть медленным на больших данных.

Этот файл можно использовать как чек-лист для дальнейшей разработки. Код написан качественно и современно, фундамент заложен отличный.
